// this file is parsed by reading the first space-delimited string of each line
// preceding spaces are ignored
// // is a valid comment
// an empty line is ignored

// Commands:
//   header/endheader:
//     every line coming after header and before endheader will be inserted into the
//     source file at the beginning. any macros should be defined here
//   func <funcName>:
//     specifies the name of the function for which following metadata is specified
//   bsize <arg> <expression>:
//     specifies the size in bytes of an argument that is a blob of data
//     arg is the name of the argument as defined in the header
//     expression is a C++ expression that determines the length of the data
//     other arguments of the function can and should be used in this expression
//     /string/ is a special case, which assumes arg is a null-terminated string
//   rsize <arg> <expression>:
//     specifies that the given argument is a pointer that will be written to
//     expression is a C++ expression that determines the size of data that is allocated
//     and can be validly written to
//     other arguments of the function can and should be used in this expression
//   custom:
//     specifies that this function should not be generated, and has custom code defined
//     in the accompanying code file
//   blocking:
//     denotes that this function should always wait for a response from the server,
//     regardless of whether anything gets returned

header
#include "gl32.h"
endheader

func glBindAttribLocation
    bsize name /string/

func glBufferData
    bsize data size

func glBufferSubData
    bsize data size

func glCompressedTexImage2D
    bsize data imageSize

func glCompressedTexSubImage2D
    bsize data imageSize

func glDeleteBuffers
    bsize buffers n * sizeof(GLuint)

func glDeleteFramebuffers
    bsize framebuffers n * sizeof(GLuint)

func glDeleteRenderbuffers
    bsize renderbuffers n * sizeof(GLuint)

func glDeleteTextures
    bsize textures n * sizeof(GLuint)

func glDrawElements
    custom
    // indices might be a blob or an offset to a buffer in gpu memory

func glFinish
    blocking

func glGenBuffers
    rsize buffers n * sizeof(GLuint)

func glGenFramebuffers
    rsize framebuffers n * sizeof(GLuint)

func glGenRenderbuffers
    rsize renderbuffers n * sizeof(GLuint)

func glGenTextures
    rsize textures n * sizeof(GLuint)

func glGetActiveAttrib
    rsize length sizeof(GLsizei)
    rsize size sizeof(GLsizei)
    rsize type sizeof(GLenum)
    rsize name bufSize

func glGetActiveUniform
    rsize length sizeof(GLsizei)
    rsize size sizeof(GLsizei)
    rsize type sizeof(GLenum)
    rsize name bufSize

func glGetAttachedShaders
    rsize count sizeof(GLsizei)
    rsize shaders maxCount * sizeof(GLuint)

func glGetAttribLocation
    bsize name /string/

func glGetBooleanv
    rsize data sizeof(GLboolean)

func glGetBufferParameteriv
    rsize params sizeof(GLint)

func glGetFloatv
    rsize data sizeof(GLfloat)

func glGetFramebufferAttachmentParameteriv
    rsize params sizeof(GLint)

func glGetIntegerv
    rsize data sizeof(GLint)

func glGetProgramiv
    rsize params (program == GL_COMPUTE_WORK_GROUP_SIZE ? 3 : 1) * sizeof(GLint)

func glGetProgramInfoLog
    rsize length sizeof(GLsizei)
    rsize infoLog bufSize

func glGetRenderbufferParameteriv
    rsize params (pname == GL_RENDERBUFFER_RED_SIZE || pname == GL_RENDERBUFFER_GREEN_SIZE || pname == GL_RENDERBUFFER_BLUE_SIZE || pname == GL_RENDERBUFFER_ALPHA_SIZE || pname == GL_RENDERBUFFER_DEPTH_SIZE || pname == GL_RENDERBUFFER_STENCIL_SIZE ? 2 : 1) * sizeof(GLint)

func glGetShaderiv
    rsize params sizeof(GLint)

func glGetShaderInfoLog
    rsize length sizeof(GLsizei)
    rsize infoLog bufSize

func glGetShaderPrecisionFormat
    rsize range 2 * sizeof(GLint)
    rsize precision sizeof(GLint)

func glGetShaderSource
    rsize length sizeof(GLsizei)
    rsize source bufSize

func glGetString
    custom
    // returns a variable-length null-terminated string
    // needs to be permanently allocated in the heap somehow
    // should probably use a heap allocated vector to store all of these

func glGetTexParameterfv
    rsize params (target == GL_TEXTURE_BORDER_COLOR ? 4 : 1) * sizeof(GLfloat)

func glGetTexParameteriv
    rsize params (target == GL_TEXTURE_BORDER_COLOR ? 4 : 1) * sizeof(GLint)

func glGetUniformfv
    custom
    // TODO: I have no idea how the heck I'm going to do this

func glGetUniformiv
    custom
    // TODO: I have no idea how the heck I'm going to do this

func glGetUniformLocation
    bsize name /string/

func glGetVertexAttribfv
    rsize params (pname == GL_CURRENT_VERTEX_ATTRIB ? 4 : 1) * sizeof(GLfloat)

func glGetVertexAttribiv
    rsize params (pname == GL_CURRENT_VERTEX_ATTRIB ? 4 : 1) * sizeof(GLint)

func glGetVertexAttribPointerv
    custom
    // no idea, check documentation

func glReadPixels
    custom
    // https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glReadPixels.xhtml
    // pixels might be a return pointer or an offset casted to a pointer

func glShaderBinary
    bsize shaders count * sizeof(GLuint)
    bsize binary length

func glShaderSource
    custom
    // sends an array of null-terminated strings

func glTexImage2D
    custom
    // pixels might be a return pointer or an offset casted to a pointer

func glTexParameterfv
    bsize params (target == GL_TEXTURE_BORDER_COLOR ? 4 : 1) * sizeof(GLfloat)

func glTexParameteriv
    bsize params (target == GL_TEXTURE_BORDER_COLOR ? 4 : 1) * sizeof(GLint)

func glTexSubImage2D
    custom
    // pixels might be a return pointer or an offset casted to a pointer

func glUniform1fv
    bsize value count * sizeof(GLfloat)

func glUniform1iv
    bsize value count * sizeof(GLint)

func glUniform2fv
    bsize value 2 * count * sizeof(GLfloat)

func glUniform2iv
    bsize value 2 * count * sizeof(GLint)

func glUniform3fv
    bsize value 3 * count * sizeof(GLfloat)

func glUniform3iv
    bsize value 3 * count * sizeof(GLint)

func glUniform4fv
    bsize value 4 * count * sizeof(GLfloat)

func glUniform4iv
    bsize value 4 * count * sizeof(GLint)

func glUniformMatrix2fv
    

func glUniformMatrix3fv
    

func glUniformMatrix4fv
    

func glVertexAttrib1fv
    

func glVertexAttrib2fv
    

func glVertexAttrib3fv
    

func glVertexAttrib4fv
    

func glVertexAttribPointer
    

func glDrawRangeElements
    

func glTexImage3D
    

func glTexSubImage3D
    

func glCompressedTexImage3D
    

func glCompressedTexSubImage3D
    

func glGenQueries
    

func glDeleteQueries
    

func glGetQueryiv
    

func glGetQueryObjectuiv
    

func glGetBufferPointerv
    

func glDrawBuffers
    

func glUniformMatrix2x3fv
    

func glUniformMatrix3x2fv
    

func glUniformMatrix2x4fv
    

func glUniformMatrix4x2fv
    

func glUniformMatrix3x4fv
    

func glUniformMatrix4x3fv
    

func glMapBufferRange
    

func glDeleteVertexArrays
    

func glGenVertexArrays
    

func glGetIntegeri_v
    

func glTransformFeedbackVaryings
    custom

func glGetTransformFeedbackVarying
    

func glVertexAttribIPointer
    

func glGetVertexAttribIiv
    

func glGetVertexAttribIuiv
    

func glVertexAttribI4iv
    

func glVertexAttribI4uiv
    

func glGetUniformuiv
    

func glGetFragDataLocation
    

func glUniform1uiv
    

func glUniform2uiv
    

func glUniform3uiv
    

func glUniform4uiv
    

func glClearBufferiv
    

func glClearBufferuiv
    

func glClearBufferfv
    

func glGetStringi
    

func glGetUniformIndices
    custom

func glGetActiveUniformsiv
    

func glGetUniformBlockIndex
    

func glGetActiveUniformBlockiv
    

func glGetActiveUniformBlockName
    

func glDrawElementsInstanced
    

func glGetInteger64v
    

func glGetSynciv
    

func glGetInteger64i_v
    

func glGetBufferParameteri64v
    

func glGenSamplers
    

func glDeleteSamplers
    

func glSamplerParameteriv
    

func glSamplerParameterfv
    

func glGetSamplerParameteriv
    

func glGetSamplerParameterfv
    

func glDeleteTransformFeedbacks
    

func glGenTransformFeedbacks
    

func glGetProgramBinary
    

func glProgramBinary
    

func glInvalidateFramebuffer
    

func glInvalidateSubFramebuffer
    

func glGetInternalformativ
    

func glDrawArraysIndirect
    

func glDrawElementsIndirect
    

func glGetFramebufferParameteriv
    

func glGetProgramInterfaceiv
    

func glGetProgramResourceIndex
    

func glGetProgramResourceName
    

func glGetProgramResourceiv
    

func glGetProgramResourceLocation
    

func glCreateShaderProgramv
    custom

func glDeleteProgramPipelines
    

func glGenProgramPipelines
    

func glGetProgramPipelineiv
    

func glProgramUniform1iv
    

func glProgramUniform2iv
    

func glProgramUniform3iv
    

func glProgramUniform4iv
    

func glProgramUniform1uiv
    

func glProgramUniform2uiv
    

func glProgramUniform3uiv
    

func glProgramUniform4uiv
    

func glProgramUniform1fv
    

func glProgramUniform2fv
    

func glProgramUniform3fv
    

func glProgramUniform4fv
    

func glProgramUniformMatrix2fv
    

func glProgramUniformMatrix3fv
    

func glProgramUniformMatrix4fv
    

func glProgramUniformMatrix2x3fv
    

func glProgramUniformMatrix3x2fv
    

func glProgramUniformMatrix2x4fv
    

func glProgramUniformMatrix4x2fv
    

func glProgramUniformMatrix3x4fv
    

func glProgramUniformMatrix4x3fv
    

func glGetProgramPipelineInfoLog
    

func glGetBooleani_v
    

func glGetMultisamplefv
    

func glGetTexLevelParameteriv
    

func glGetTexLevelParameterfv
    

func glDebugMessageControl
    

func glDebugMessageInsert
    

func glDebugMessageCallback
    

func glGetDebugMessageLog
    

func glPushDebugGroup
    

func glObjectLabel
    

func glGetObjectLabel
    

func glObjectPtrLabel
    

func glGetObjectPtrLabel
    

func glGetPointerv
    

func glDrawElementsBaseVertex
    

func glDrawRangeElementsBaseVertex
    

func glDrawElementsInstancedBaseVertex
    

func glReadnPixels
    

func glGetnUniformfv
    

func glGetnUniformiv
    

func glGetnUniformuiv
    

func glTexParameterIiv
    

func glTexParameterIuiv
    

func glGetTexParameterIiv
    

func glGetTexParameterIuiv
    

func glSamplerParameterIiv
    

func glSamplerParameterIuiv
    

func glGetSamplerParameterIiv
    

func glGetSamplerParameterIuiv
    

